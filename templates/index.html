<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnAI - Schedule Your AI Learning Session</title>
    <link rel="icon" type="image/png" href="/static/icon.png">
    <link rel="shortcut icon" type="image/png" href="/static/icon.png">
    <link rel="apple-touch-icon" href="/static/icon.png">
    <link rel="stylesheet" href="/static/css/style.css">
    {% if recaptcha_site_key %}
    <script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>
    {% endif %}
</head>
<body
    {% if authenticated %}
    data-authenticated="true"
    data-user-email="{{ user_email }}"
    data-user-name="{{ user_name }}"
    {% else %}
    data-authenticated="false"
    {% endif %}
    {% if recaptcha_site_key %}
    data-recaptcha-key="{{ recaptcha_site_key }}"
    {% endif %}
>
    <!-- Stunning Animated Background -->
    <div class="gradient-bg">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
        <div class="blob blob-4"></div>
        <div class="blob blob-5"></div>
    </div>
    <div class="aurora"></div>
    <div class="dot-pattern"></div>

    <!-- Floating Particles -->
    <div class="floating-particles">
        <div class="floating-particle"></div>
        <div class="floating-particle"></div>
        <div class="floating-particle"></div>
        <div class="floating-particle"></div>
        <div class="floating-particle"></div>
        <div class="floating-particle"></div>
    </div>

    <!-- Theme Toggle - Top Right -->
    <button class="theme-toggle" data-action="toggleTheme" aria-label="Toggle theme" title="Toggle Dark/Light Mode">
        <svg id="theme-icon-light" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg id="theme-icon-dark" class="hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
    </button>

    <!-- Floating Navigation Bar -->
    <nav class="floating-nav">
        <!-- My Booking Button -->
        <button class="nav-btn" data-action="openViewMyBookingDirect" title="View My Booking">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            <span class="nav-label">My Booking</span>
        </button>

        <!-- AI Tools Button -->
        <a href="/ai-tools" class="nav-btn" title="Free AI Tools for Students">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L13.5 8.5L20 10L13.5 11.5L12 18L10.5 11.5L4 10L10.5 8.5L12 2Z"/>
            </svg>
            <span class="nav-label">AI Tools</span>
        </a>

        <!-- Pricing Button -->
        <a href="/pricing" class="nav-btn {% if is_external_user %}nav-btn-highlight{% endif %}" title="View Pricing" id="pricingBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
                <path d="M12 18V6"/>
            </svg>
            <span class="nav-label">Pricing</span>
        </a>

        <!-- Contact Button -->
        <a href="#" class="nav-btn" data-action="openContactForm" title="Contact Us">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
            </svg>
            <span class="nav-label">Contact</span>
        </a>

        {% if session.get('authenticated') %}
        <div class="nav-divider"></div>

        <!-- Monmouth Login Link -->
        <a href="/login" class="nav-btn" title="Sign in with Monmouth University account">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                <polyline points="10 17 15 12 10 7"/>
                <line x1="15" y1="12" x2="3" y2="12"/>
            </svg>
            <span class="nav-label">Monmouth Login</span>
        </a>

        <!-- Sign Out Button -->
        <button class="nav-btn nav-btn-danger" data-action="logout" title="Sign Out" aria-label="Sign out">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span class="nav-label">Sign Out</span>
        </button>
        {% endif %}
    </nav>

    <!-- AI Tools Panel -->
    <div id="aiToolsPanel" class="ai-tools-panel hidden">
        <div class="ai-tools-header">
            <h3>AI Tools Quick Guide</h3>
            <button data-action="toggleAITools" class="ai-tools-close">&times;</button>
        </div>
        <p class="ai-tools-intro">The best AI tools for every task - bookmark this for quick reference!</p>

        <div class="ai-tools-grid">
            <!-- General Chat & Writing -->
            <div class="ai-tool-category">
                <div class="category-header">
                    <span class="category-icon">üí¨</span>
                    <h4>General Chat & Writing</h4>
                </div>
                <div class="tool-list">
                    <a href="https://chat.openai.com" target="_blank" class="tool-item">
                        <span class="tool-name">ChatGPT</span>
                        <span class="tool-best">Best for: Versatile conversations, brainstorming</span>
                    </a>
                    <a href="https://claude.ai" target="_blank" class="tool-item">
                        <span class="tool-name">Claude</span>
                        <span class="tool-best">Best for: Long documents, nuanced analysis, coding</span>
                    </a>
                    <a href="https://gemini.google.com" target="_blank" class="tool-item">
                        <span class="tool-name">Gemini</span>
                        <span class="tool-best">Best for: Google integration, multimodal tasks</span>
                    </a>
                </div>
            </div>

            <!-- Research -->
            <div class="ai-tool-category">
                <div class="category-header">
                    <span class="category-icon">üîç</span>
                    <h4>Research & Learning</h4>
                </div>
                <div class="tool-list">
                    <a href="https://perplexity.ai" target="_blank" class="tool-item">
                        <span class="tool-name">Perplexity</span>
                        <span class="tool-best">Best for: Real-time web research with citations</span>
                    </a>
                    <a href="https://elicit.com" target="_blank" class="tool-item">
                        <span class="tool-name">Elicit</span>
                        <span class="tool-best">Best for: Academic paper research & summaries</span>
                    </a>
                    <a href="https://notebooklm.google.com" target="_blank" class="tool-item">
                        <span class="tool-name">NotebookLM</span>
                        <span class="tool-best">Best for: Analyzing your own documents</span>
                    </a>
                </div>
            </div>

            <!-- Coding -->
            <div class="ai-tool-category">
                <div class="category-header">
                    <span class="category-icon">üíª</span>
                    <h4>Coding & Development</h4>
                </div>
                <div class="tool-list">
                    <a href="https://github.com/features/copilot" target="_blank" class="tool-item">
                        <span class="tool-name">GitHub Copilot</span>
                        <span class="tool-best">Best for: Code autocomplete in your editor</span>
                    </a>
                    <a href="https://cursor.com" target="_blank" class="tool-item">
                        <span class="tool-name">Cursor</span>
                        <span class="tool-best">Best for: AI-first code editor experience</span>
                    </a>
                    <a href="https://claude.ai/download" target="_blank" class="tool-item">
                        <span class="tool-name">Claude Code</span>
                        <span class="tool-best">Best for: Complex coding projects & debugging</span>
                    </a>
                </div>
            </div>

            <!-- Excel & Data -->
            <div class="ai-tool-category">
                <div class="category-header">
                    <span class="category-icon">üìä</span>
                    <h4>Excel & Data Analysis</h4>
                </div>
                <div class="tool-list">
                    <a href="https://www.microsoft.com/en-us/microsoft-365/copilot" target="_blank" class="tool-item">
                        <span class="tool-name">Excel Copilot</span>
                        <span class="tool-best">Best for: Formulas, pivot tables, analysis</span>
                    </a>
                    <a href="https://chat.openai.com" target="_blank" class="tool-item">
                        <span class="tool-name">ChatGPT Code Interpreter</span>
                        <span class="tool-best">Best for: Data cleaning, visualizations</span>
                    </a>
                    <a href="https://julius.ai" target="_blank" class="tool-item">
                        <span class="tool-name">Julius AI</span>
                        <span class="tool-best">Best for: Quick data analysis & charts</span>
                    </a>
                </div>
            </div>

            <!-- Creative & Images -->
            <div class="ai-tool-category">
                <div class="category-header">
                    <span class="category-icon">üé®</span>
                    <h4>Images & Creative</h4>
                </div>
                <div class="tool-list">
                    <a href="https://midjourney.com" target="_blank" class="tool-item">
                        <span class="tool-name">Midjourney</span>
                        <span class="tool-best">Best for: Artistic, high-quality images</span>
                    </a>
                    <a href="https://chat.openai.com" target="_blank" class="tool-item">
                        <span class="tool-name">DALL-E 3</span>
                        <span class="tool-best">Best for: Quick image generation via ChatGPT</span>
                    </a>
                    <a href="https://canva.com" target="_blank" class="tool-item">
                        <span class="tool-name">Canva AI</span>
                        <span class="tool-best">Best for: Design templates, presentations</span>
                    </a>
                </div>
            </div>

            <!-- Productivity -->
            <div class="ai-tool-category">
                <div class="category-header">
                    <span class="category-icon">‚ö°</span>
                    <h4>Productivity & Workflow</h4>
                </div>
                <div class="tool-list">
                    <a href="https://notion.so" target="_blank" class="tool-item">
                        <span class="tool-name">Notion AI</span>
                        <span class="tool-best">Best for: Notes, docs, project management</span>
                    </a>
                    <a href="https://otter.ai" target="_blank" class="tool-item">
                        <span class="tool-name">Otter.ai</span>
                        <span class="tool-best">Best for: Meeting transcription & summaries</span>
                    </a>
                    <a href="https://zapier.com" target="_blank" class="tool-item">
                        <span class="tool-name">Zapier AI</span>
                        <span class="tool-best">Best for: Automating workflows between apps</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="ai-tools-footer">
            <p>Want to learn how to use these effectively? <a href="#" data-action="toggleAITools">Book a session!</a></p>
        </div>
    </div>

    <!-- Pricing Panel -->
    <div id="pricingPanel" class="ai-tools-panel hidden">
        <div class="ai-tools-header">
            <h3>Pricing Information</h3>
            <button data-action="closePricingInfo" class="ai-tools-close">&times;</button>
        </div>
        <p class="ai-tools-intro">Flexible pricing options for everyone!</p>

        <div style="padding: 1.5rem;">
            <!-- Monmouth Students -->
            <div style="background: linear-gradient(135deg, rgba(255, 90, 31, 0.1), rgba(234, 88, 12, 0.1)); border-left: 4px solid var(--primary); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <h4 style="margin-top: 0; color: var(--primary); display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                        <path d="M6 12v5c3 3 9 3 12 0v-5"/>
                    </svg>
                    Monmouth University Students
                </h4>
                <p style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0; color: var(--success);">FREE</p>
                <p style="margin: 0; color: var(--text-secondary);">
                    All AI learning sessions are completely free for Monmouth University students. Just sign in with your Monmouth email to book!
                </p>
            </div>

            <!-- Outside Users -->
            <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1)); border-left: 4px solid var(--success); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <h4 style="margin-top: 0; color: var(--success); display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                    Outside Users Welcome!
                </h4>
                <p style="font-size: 2rem; font-weight: 700; margin: 0.5rem 0; color: var(--text-primary);">$50 <span style="font-size: 1rem; font-weight: 400; color: var(--text-secondary);">/ 30-90 min session</span></p>
                <p style="margin: 0 0 1rem 0; color: var(--text-secondary);">
                    Professional AI mentoring tailored to your goals. Perfect for professionals, entrepreneurs, or anyone looking to master AI tools.
                </p>
                <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary);">
                    <li>One-on-one personalized instruction</li>
                    <li>Hands-on practice with real tools</li>
                    <li>Follow-up resources and guidance</li>
                    <li>Flexible scheduling</li>
                </ul>
            </div>

            <!-- Payment Information -->
            <div style="background: var(--surface-secondary); border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px;">
                <h4 style="margin-top: 0; display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    How Payment Works
                </h4>
                <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">
                    <strong>Simple & Flexible:</strong> After you book a session, we'll send you payment details via email. You can pay before or after your session - whatever works best for you. We accept Venmo, Zelle, PayPal, or other convenient methods.
                </p>
            </div>

            <div style="margin-top: 1.5rem; text-align: center;">
                <p style="color: var(--text-secondary); font-size: 0.9rem;">
                    Questions about pricing? <a href="#" data-action="closePricingAndContact" style="color: var(--primary); text-decoration: underline;">Contact us</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Loading Screen (shown initially) -->
    <div id="loadingScreen" style="position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: var(--bg); z-index: 9999;">
        <div style="text-align: center;">
            <div class="spinner" style="margin: 0 auto 1rem;"></div>
            <p style="color: var(--text-secondary);">Loading...</p>
        </div>
    </div>

    <!-- Invite Code Gate (hidden initially, shown after check) -->
    <div id="authGate" class="invite-gate-wrapper" style="display: none; position: fixed; inset: 0; background: linear-gradient(135deg, rgba(255, 90, 31, 0.1) 0%, rgba(194, 65, 12, 0.1) 100%); backdrop-filter: blur(10px); align-items: center; justify-content: center; z-index: 9000; opacity: 0; transition: opacity 0.3s ease; pointer-events: none;">
        <div class="invite-gate-bg" style="position: absolute; inset: 0;"></div>
        <div class="invite-gate-container" style="position: relative; z-index: 10; background: var(--surface); border-radius: 16px; padding: 3rem; max-width: 450px; width: 100%; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); border: 1px solid var(--border); animation: slideUp 0.5s ease;">
            <!-- Logo and Header -->
            <div class="invite-gate-header" style="text-align: center; margin-bottom: 2rem;">
                <div class="invite-logo-pulse" style="margin-bottom: 1rem;">
                    <h1 class="invite-logo" style="font-family: 'Space Mono', monospace; font-size: 1.75rem; font-weight: 700; color: var(--text-primary); -webkit-text-fill-color: var(--text-primary); letter-spacing: 0.1em; margin: 0;">
                        LEARN<span style="color: var(--primary); -webkit-text-fill-color: var(--primary);">_AI</span>
                    </h1>
                </div>
                <p class="invite-subtitle" style="color: var(--text-secondary); margin: 0.5rem 0 0 0; font-size: 0.95rem; font-weight: 500;">AI Learning Sessions</p>
            </div>

            <!-- Lock Icon with Animation -->
            <div class="invite-lock-container" style="display: flex; justify-content: center; margin-bottom: 2rem;">
                <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 80px; height: 80px; color: var(--primary); opacity: 0.8;">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
            </div>

            <!-- Title -->
            <div class="invite-title-section" style="text-align: center; margin-bottom: 2rem;">
                <h2 class="invite-title" style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin: 0 0 0.75rem 0;">Authentication Required</h2>
                <p class="invite-description" style="color: var(--text-secondary); margin: 0; font-size: 0.95rem;">Sign in with your Monmouth University or Google account to book sessions.</p>
            </div>

            <!-- Microsoft Login Button -->
            <a
                href="/login"
                style="display: inline-flex; align-items: center; justify-content: center; gap: 0.75rem; width: 100%; padding: 1rem; background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; text-decoration: none; transition: all 0.3s ease; margin-bottom: 0.75rem; font-size: 0.95rem;"
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 20px rgba(0, 120, 212, 0.3)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';"
            >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 20px; height: 20px;">
                    <path d="M11.4 24H0V12.6h11.4V24ZM24 24H12.6V12.6H24V24ZM11.4 11.4H0V0h11.4v11.4Zm12.6 0H12.6V0H24v11.4Z"/>
                </svg>
                <span>Sign In with Monmouth</span>
            </a>

            <!-- Google Login Button -->
            <a
                href="/login/google"
                style="display: inline-flex; align-items: center; justify-content: center; gap: 0.75rem; width: 100%; padding: 1rem; background: white; color: #3c4043; border: 1px solid #dadce0; border-radius: 8px; cursor: pointer; font-weight: 600; text-decoration: none; transition: all 0.3s ease; margin-bottom: 1.5rem; font-size: 0.95rem;"
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0, 0, 0, 0.15)'; this.style.borderColor='#d2e3fc';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'; this.style.borderColor='#dadce0';"
            >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width: 20px; height: 20px;">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                <span>Sign In with Google</span>
            </a>

            <!-- Security Notice -->
            <div class="invite-security-notice" style="background: linear-gradient(135deg, rgba(255, 90, 31, 0.1) 0%, rgba(194, 65, 12, 0.1) 100%); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; text-align: center;">
                <div class="security-icon" style="margin-bottom: 0.75rem;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 24px; height: 24px; color: var(--primary); margin: 0 auto; display: block;">
                        <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        <path d="M9 11l3 3L15 9"/>
                    </svg>
                </div>
                <p style="margin: 0; font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">
                    <strong style="color: var(--text-primary);">Secure Access:</strong> Monmouth students get free access. Outside users welcome with payment.
                </p>
            </div>
        </div>
    </div>

    <!-- Main Content (shown after authentication) -->
    <div id="mainContent" style="display: none;">
        <div class="container">
            <!-- Header -->
        <header class="header">
            <h1 class="logo">
                <span class="logo-text">LEARN<span class="logo-ai">_AI</span></span>
            </h1>
            <p class="tagline">Schedule a Meeting</p>
            <a href="/projects" class="ai-badge-link">
                <div class="ai-badge">Built with AI</div>
            </a>


            <!-- Hand-drawn annotation pointing to badge -->
            <div class="annotation-wrapper">
                <div class="hand-drawn-text-block">
                    <span id="typing-text" class="typing-text"></span>
                </div>
                <svg class="sketchy-arrow-large" viewBox="0 0 140 50" xmlns="http://www.w3.org/2000/svg">
                    <!-- Hand-drawn wobbly arrow line - extended left -->
                    <path class="arrow-line" d="M 5 25 Q 15 23, 25 24 Q 40 25, 55 26 Q 70 26, 85 25 Q 100 24, 115 25 L 130 25"
                          stroke="currentColor"
                          stroke-width="2.5"
                          fill="none"
                          stroke-linecap="round"
                          opacity="0.8"/>
                    <!-- Hand-drawn arrow tip -->
                    <path class="arrow-tip" d="M 123 20 Q 128 22, 132 25 Q 128 28, 123 30"
                          stroke="currentColor"
                          stroke-width="2.5"
                          fill="none"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          opacity="0.8"/>
                </svg>
            </div>
        </header>

        <!-- Progress Indicator -->
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Info</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Questions</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="6">
                <div class="step-circle">3</div>
                <div class="step-label">Booking</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="8">
                <div class="step-circle">4</div>
                <div class="step-label">Done</div>
            </div>
        </div>

        <!-- Detailed Progress Bar -->
        <div id="detailedProgress" class="detailed-progress" style="display: none;">
            <div class="detailed-progress-bar">
                <div class="detailed-progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="detailed-progress-text" id="progressText">0% Complete</div>
        </div>

        <!-- Form Card -->
        <div class="form-card">
            <!-- Step 1: Personal Information -->
            <div id="step1" class="step active">
                <h2>Book Your Session</h2>
                <p class="step-description">Let's personalize your AI learning experience. Tell me about yourself so I can prepare the best session for you.</p>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="full_name">Full Name *</label>
                        <input type="text" id="full_name" placeholder="John Doe" required>
                    </div>

                    {% if not session.get('authenticated') %}
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" placeholder="john@example.com" required>
                    </div>

                    <div class="form-group">
                        <label for="email_confirm">Confirm Email Address *</label>
                        <input type="email" id="email_confirm" placeholder="john@example.com" required>
                        <small class="form-hint" id="email-match-hint" style="display: none; color: var(--error); margin-top: 0.5rem;">Emails do not match</small>
                    </div>
                    {% else %}
                    <div class="form-group" style="background: #f0f9ff; border: 1px solid #bfdbfe; border-radius: 0.5rem; padding: 1rem; grid-column: 1 / -1;">
                        <p style="margin: 0; font-size: 0.875rem; color: #0c4a6e;">
                            <strong>‚úì Email:</strong> {{ user_email }}
                        </p>
                        <p style="margin: 0.5rem 0 0 0; font-size: 0.875rem; color: #0c4a6e;">
                            {% if is_external_user %}
                            Verified via Google SSO
                            {% else %}
                            Verified via Monmouth University SSO
                            {% endif %}
                        </p>
                    </div>
                    
                    {% if is_external_user %}
                    <div class="form-group" style="background: linear-gradient(135deg, rgba(255, 90, 31, 0.1) 0%, rgba(194, 65, 12, 0.1) 100%); border: 1px solid var(--primary); border-radius: 0.5rem; padding: 1rem; grid-column: 1 / -1;">
                        <p style="margin: 0; font-size: 0.875rem; color: var(--text); display: flex; align-items: center; gap: 0.5rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
                                <path d="M12 18V6"/>
                            </svg>
                            <strong>Pricing:</strong> Starting at $27/person for groups, $80 for individual sessions
                        </p>
                        <p style="margin: 0.5rem 0 0 1.75rem; font-size: 0.875rem; color: var(--text-secondary);">
                            Group discounts available! $10 off per person for Zoom sessions.
                            <a href="/pricing" style="color: var(--primary); text-decoration: underline; font-weight: 600;">View full pricing</a>
                        </p>
                    </div>
                    {% endif %}
                    {% endif %}

                    <!-- Honeypot fields (hidden from users, bots will fill them) -->
                    <div class="form-group" style="position: absolute; left: -9999px; opacity: 0; pointer-events: none;" aria-hidden="true" tabindex="-1">
                        <label for="website">Website</label>
                        <input type="text" id="website" name="website" placeholder="https://" autocomplete="off" tabindex="-1">
                    </div>
                    <div class="form-group" style="position: absolute; left: -9999px; opacity: 0; pointer-events: none;" aria-hidden="true" tabindex="-1">
                        <label for="phone2">Secondary Phone</label>
                        <input type="text" id="phone2" name="phone2" placeholder="(555) 123-4567" autocomplete="off" tabindex="-1">
                    </div>

                    <div class="form-group">
                        <label for="role">I am a *</label>
                        <select id="role" required data-action="showDepartmentField">
                            <option value="">Select your role</option>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="advisor">Advisor</option>
                            <option value="staff">Staff Member</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group" id="department-field" style="display: none;">
                        <label for="department" id="department-label">Department *</label>
                        <input type="text" id="department" placeholder="e.g., Computer Science, Mathematics, Business">
                    </div>
                </div>

                <button class="btn-primary" data-action="goToStep" data-param="2">Continue to AI Experience</button>
            </div>

            <!-- Step 2: Question 1 - AI Experience & Familiarity -->
            <div id="step2" class="step">
                <div class="question-progress">Question 1 of 4</div>
                <h2>What's your AI experience level?</h2>
                <p class="step-description">This helps us tailor the perfect session for you.</p>

                <div class="question-group">
                    <div class="radio-group-clean">
                        <label class="radio-option-clean">
                            <input type="radio" name="ai_familiarity" value="new" required>
                            <div class="option-content-clean">
                                <span class="option-badge">01</span>
                                <div class="option-text-clean">
                                    <span class="option-title-clean">Beginner</span>
                                    <small class="option-hint-clean">Never used AI or just getting started</small>
                                </div>
                            </div>
                        </label>
                        <label class="radio-option-clean">
                            <input type="radio" name="ai_familiarity" value="casual">
                            <div class="option-content-clean">
                                <span class="option-badge">02</span>
                                <div class="option-text-clean">
                                    <span class="option-title-clean">Learning</span>
                                    <small class="option-hint-clean">Tried it a few times, want to improve</small>
                                </div>
                            </div>
                        </label>
                        <label class="radio-option-clean">
                            <input type="radio" name="ai_familiarity" value="practical">
                            <div class="option-content-clean">
                                <span class="option-badge">03</span>
                                <div class="option-text-clean">
                                    <span class="option-title-clean">Regular User</span>
                                    <small class="option-hint-clean">Use AI regularly for work or school</small>
                                </div>
                            </div>
                        </label>
                        <label class="radio-option-clean">
                            <input type="radio" name="ai_familiarity" value="advanced">
                            <div class="option-content-clean">
                                <span class="option-badge">04</span>
                                <div class="option-text-clean">
                                    <span class="option-title-clean">Advanced</span>
                                    <small class="option-hint-clean">Very experienced, exploring advanced uses</small>
                                </div>
                            </div>
                        </label>
                    </div>

                    <!-- Hidden fields to capture confidence level data -->
                    <input type="hidden" name="confidence_level" id="confidence_level" value="3">
                </div>

                <div class="button-group">
                    <button class="btn-secondary" data-action="goToStep" data-param="1">Back</button>
                    <button class="btn-primary" data-action="goToStep" data-param="3">Next Question</button>
                </div>
            </div>

            <!-- Step 3: Question 2 - AI Tools (Clean Design) -->
            <div id="step3" class="step">
                <div class="question-progress">Question 2 of 4</div>
                <h2>Which AI tools have you explored?</h2>
                <p class="step-description">Select all that apply - no worries if you're just starting!</p>

                <div class="question-group">
                    <div class="checkbox-grid-clean">
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="chatgpt">
                            <div class="card-content-clean">
                                <span class="card-title-clean">ChatGPT</span>
                                <small class="card-hint-clean">OpenAI's assistant</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="claude">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Claude</span>
                                <small class="card-hint-clean">Anthropic's AI</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="gemini">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Gemini</span>
                                <small class="card-hint-clean">Google's AI</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="image_gen">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Image AI</span>
                                <small class="card-hint-clean">DALL¬∑E, Midjourney</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="coding">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Coding AI</span>
                                <small class="card-hint-clean">Copilot, Cursor</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="research">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Research AI</span>
                                <small class="card-hint-clean">Perplexity, Elicit</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="video">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Video & Audio</span>
                                <small class="card-hint-clean">Runway, ElevenLabs</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="writing">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Writing AI</span>
                                <small class="card-hint-clean">Grammarly, Notion AI</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean">
                            <input type="checkbox" name="ai_tools" value="productivity">
                            <div class="card-content-clean">
                                <span class="card-title-clean">Productivity</span>
                                <small class="card-hint-clean">MS Copilot, Zapier</small>
                            </div>
                        </label>
                        <label class="checkbox-card-clean none-option">
                            <input type="checkbox" name="ai_tools" value="none">
                            <div class="card-content-clean">
                                <span class="card-title-clean">None Yet</span>
                                <small class="card-hint-clean">Just starting out</small>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" data-action="goToStep" data-param="2">Back</button>
                    <button class="btn-primary" data-action="goToStep" data-param="4">Next Question</button>
                </div>
            </div>

            <!-- Step 4: Question 3 - Primary Use (Clean 2-column) -->
            <div id="step4" class="step">
                <div class="question-progress">Question 3 of 4</div>
                <h2>What do you want to use AI for?</h2>
                <p class="step-description">Select all that interest you - we'll cover what matters most to you.</p>

                <div class="question-group">
                    <div class="checkbox-group-two-col">
                        <label class="checkbox-option-two-col">
                            <input type="checkbox" name="primary_use" value="writing">
                            <div class="option-content-two-col">
                                <span class="option-title-two-col">Writing & Content</span>
                                <small class="option-hint-two-col">Essays, emails, creative writing</small>
                            </div>
                        </label>
                        <label class="checkbox-option-two-col">
                            <input type="checkbox" name="primary_use" value="research">
                            <div class="option-content-two-col">
                                <span class="option-title-two-col">Research & Analysis</span>
                                <small class="option-hint-two-col">Finding info, summarizing articles</small>
                            </div>
                        </label>
                        <label class="checkbox-option-two-col">
                            <input type="checkbox" name="primary_use" value="coding">
                            <div class="option-content-two-col">
                                <span class="option-title-two-col">Coding & Development</span>
                                <small class="option-hint-two-col">Building apps, debugging code</small>
                            </div>
                        </label>
                        <label class="checkbox-option-two-col">
                            <input type="checkbox" name="primary_use" value="creative">
                            <div class="option-content-two-col">
                                <span class="option-title-two-col">Creative Projects</span>
                                <small class="option-hint-two-col">Images, videos, art, design</small>
                            </div>
                        </label>
                        <label class="checkbox-option-two-col">
                            <input type="checkbox" name="primary_use" value="productivity">
                            <div class="option-content-two-col">
                                <span class="option-title-two-col">Work & Productivity</span>
                                <small class="option-hint-two-col">Efficiency, task management</small>
                            </div>
                        </label>
                        <label class="checkbox-option-two-col">
                            <input type="checkbox" name="primary_use" value="education">
                            <div class="option-content-two-col">
                                <span class="option-title-two-col">School & Learning</span>
                                <small class="option-hint-two-col">Studying, homework, exam prep</small>
                            </div>
                        </label>
                        <label class="checkbox-option-two-col">
                            <input type="checkbox" name="primary_use" value="not_sure">
                            <div class="option-content-two-col">
                                <span class="option-title-two-col">Exploring Options</span>
                                <small class="option-hint-two-col">Want to see what's possible</small>
                            </div>
                        </label>
                    </div>

                    <!-- Hidden field for business (combined with productivity) -->
                    <input type="hidden" name="business_hidden" value="">
                </div>

                <div class="button-group">
                    <button class="btn-secondary" data-action="goToStep" data-param="3">Back</button>
                    <button class="btn-primary" data-action="goToStep" data-param="5">Next Question</button>
                </div>
            </div>

            <!-- Step 5: Question 4 - Goals & Comments Combined (Clean 3-column) -->
            <div id="step5" class="step">
                <div class="question-progress">Question 4 of 4</div>
                <h2>What are your goals for this session?</h2>
                <p class="step-description">Select what you'd like to accomplish and share any specific interests.</p>

                <div class="question-group">
                    <div class="checkbox-grid-goals">
                        <label class="checkbox-card-goals">
                            <input type="checkbox" name="learning_goal" value="use_tools">
                            <div class="card-content-goals">
                                <span class="card-title-goals">Learn to use AI better</span>
                            </div>
                        </label>
                        <label class="checkbox-card-goals">
                            <input type="checkbox" name="learning_goal" value="understand">
                            <div class="card-content-goals">
                                <span class="card-title-goals">Understand how AI works</span>
                            </div>
                        </label>
                        <label class="checkbox-card-goals">
                            <input type="checkbox" name="learning_goal" value="build">
                            <div class="card-content-goals">
                                <span class="card-title-goals">Build AI projects</span>
                            </div>
                        </label>
                        <label class="checkbox-card-goals">
                            <input type="checkbox" name="learning_goal" value="productivity">
                            <div class="card-content-goals">
                                <span class="card-title-goals">Work more efficiently</span>
                            </div>
                        </label>
                        <label class="checkbox-card-goals">
                            <input type="checkbox" name="learning_goal" value="career">
                            <div class="card-content-goals">
                                <span class="card-title-goals">Build career skills</span>
                            </div>
                        </label>
                        <label class="checkbox-card-goals">
                            <input type="checkbox" name="learning_goal" value="explore">
                            <div class="card-content-goals">
                                <span class="card-title-goals">Just exploring & curious</span>
                            </div>
                        </label>
                    </div>

                    <!-- Hidden fields for removed questions -->
                    <input type="hidden" name="integrate_hidden" value="">

                    <div class="form-group" style="margin-top: 2rem;">
                        <label for="personal_comments" style="font-weight: 600; font-size: 1.1rem; color: var(--text-primary);">Anything specific you'd like to focus on?</label>
                        <textarea id="personal_comments" rows="4" placeholder="Optional: Share any specific topics, questions, or projects you want help with...&#10;&#10;For example: 'I want to learn prompt engineering' or 'I'm building an app and need AI integration help'"></textarea>
                        <small class="form-hint">This helps me prepare the perfect session for you</small>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" data-action="goToStep" data-param="4">Back</button>
                    <button class="btn-primary" data-action="goToStep" data-param="6">Continue to Time Selection</button>
                </div>
            </div>

            <!-- Step 6: Time Selection -->
            <div id="step6" class="step">
                <h2>Choose Your Preferred Time</h2>
                <p class="step-description">Select a time slot that works best for you. Sessions are 30-90 minutes based on your needs.</p>

                <!-- Tutor Filter -->
                <div style="margin-bottom: 1.5rem;">
                    <label for="tutorFilter" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-primary);">Filter by Tutor:</label>
                    <select id="tutorFilter" data-action="filterSlotsByTutor" style="width: 100%; max-width: 300px; padding: 0.75rem; border: 1px solid var(--border); border-radius: 0.5rem; background: var(--surface); color: var(--text-primary); font-family: inherit; font-size: 1rem; cursor: pointer;">
                        <option value="all">All Tutors</option>
                        <option value="christopher_buzaid">Christopher Buzaid</option>
                        <option value="danny">Danny</option>
                        <option value="kiumbura">Kiumbura</option>
                    </select>
                </div>

                <div id="loadingSlots" class="loading-container">
                    <div class="spinner"></div>
                    <p>Loading available time slots...</p>
                </div>

                <div id="slotsContainer" class="slots-grid hidden"></div>

                <input type="hidden" id="selected_slot">

                <div class="button-group">
                    <button class="btn-secondary" data-action="goToStep" data-param="5">Back</button>
                    <button id="continueToLocation" class="btn-primary" data-action="goToStep" data-param="7" disabled>Continue to Location</button>
                </div>
            </div>

            <!-- Step 7: Location & Attendees -->
            <div id="step7" class="step">
                <h2>Session Details</h2>
                <p class="step-description">Choose how you'd like to meet and how many will be attending.</p>

                <!-- Meeting Type Selection -->
                <div class="form-group meeting-type-group">
                    <label class="section-label">How would you like to meet? *</label>
                    <div class="meeting-type-options">
                        <label class="meeting-option" data-action="selectMeetingType" data-type="in-person">
                            <input type="radio" name="meeting_type" value="in-person" checked>
                            <div class="meeting-option-content">
                                <div class="meeting-option-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                        <circle cx="9" cy="7" r="4"/>
                                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                    </svg>
                                </div>
                                <div class="meeting-option-text">
                                    <span class="meeting-option-title">In-Person</span>
                                    <span class="meeting-option-desc">Meet on campus at Monmouth University</span>
                                </div>
                            </div>
                        </label>
                        <label class="meeting-option" data-action="selectMeetingType" data-type="zoom">
                            <input type="radio" name="meeting_type" value="zoom">
                            <div class="meeting-option-content">
                                <div class="meeting-option-icon zoom-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="2" y="6" width="14" height="12" rx="2"/>
                                        <path d="M16 10l4-2v8l-4-2"/>
                                    </svg>
                                </div>
                                <div class="meeting-option-text">
                                    <span class="meeting-option-title">Zoom Session</span>
                                    <span class="meeting-option-desc">Virtual meeting via Zoom</span>
                                </div>
                                <span class="zoom-discount-badge">$10 OFF</span>
                            </div>
                        </label>
                    </div>
                    <p class="zoom-discount-note" id="zoomDiscountNote" style="display: none;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
                            <path d="M9 12l2 2 4-4"/>
                        </svg>
                        Zoom sessions include a <strong>$10 discount</strong> per client. We'll send you the meeting link via email.
                    </p>
                </div>

                <!-- In-Person Location (shown when in-person is selected) -->
                <div id="inPersonLocation" class="form-grid">
                    <div class="form-group">
                        <label for="selected_building">Building *</label>
                        <select id="selected_building">
                            <option value="">Select a building</option>
                            <option value="Edison Hall">Edison Hall</option>
                            <option value="Howard Hall">Howard Hall</option>
                            <option value="Pozycki Hall">Pozycki Hall</option>
                            <option value="McAllan Hall">McAllan Hall</option>
                            <option value="Great Hall">Great Hall</option>
                            <option value="Bey Hall">Bey Hall</option>
                            <option value="Rebecca Stafford Student Center">Rebecca Stafford Student Center</option>
                            <option value="Guggenheim Memorial Library">Guggenheim Memorial Library</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="room_number">Room Number / Office *</label>
                        <input type="text" id="room_number" placeholder="e.g., Room 204, Office 3B">
                        <small class="form-hint">Enter the specific room number or office name</small>
                    </div>
                </div>

                <!-- Attendee Count Section -->
                <div class="form-group attendee-section">
                    <label class="section-label">How many people will be attending? *</label>
                    <div class="attendee-selector">
                        <button type="button" class="attendee-btn minus" data-action="decreaseAttendees">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/></svg>
                        </button>
                        <div class="attendee-display">
                            <span id="attendeeCount">1</span>
                            <span class="attendee-label">attendee</span>
                        </div>
                        <button type="button" class="attendee-btn plus" data-action="increaseAttendees">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
                        </button>
                    </div>
                    <div class="pricing-preview" id="pricingPreview" style="display: none;">
                        <div class="pricing-preview-content">
                            <span class="pricing-preview-label">Estimated price:</span>
                            <span class="pricing-preview-amount" id="priceEstimate">$80 / session</span>
                        </div>
                        <a href="/pricing" class="pricing-link" target="_blank">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                                <polyline points="15 3 21 3 21 9"/>
                                <line x1="10" y1="14" x2="21" y2="3"/>
                            </svg>
                            View full pricing
                        </a>
                    </div>
                </div>

                {% if recaptcha_site_key %}
                <p style="font-size: 0.75rem; color: var(--text-tertiary); text-align: center; margin: 1rem 0 0.5rem 0;">
                    This site is protected by reCAPTCHA and the Google
                    <a href="https://policies.google.com/privacy" target="_blank" style="color: var(--primary); text-decoration: none;">Privacy Policy</a> and
                    <a href="https://policies.google.com/terms" target="_blank" style="color: var(--primary); text-decoration: none;">Terms of Service</a> apply.
                </p>
                {% endif %}

                <div class="button-group">
                    <button class="btn-secondary" data-action="goToStep" data-param="6">Back</button>
                    <button class="btn-primary" data-action="confirmBooking">
                        <span class="btn-text">Confirm Booking</span>
                        <span class="btn-spinner hidden"></span>
                    </button>
                </div>
            </div>

            <!-- Step 8: Success -->
            <div id="step8" class="step">
                <div class="success-container">
                    <div class="success-icon">
                        <svg viewBox="0 0 52 52">
                            <circle class="success-circle" cx="26" cy="26" r="25" fill="none"/>
                            <path class="success-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                        </svg>
                    </div>

                    <h2>You're All Set!</h2>
                    <p class="success-message">Your AI learning session has been successfully booked.</p>

                    <div id="bookingDetails" class="booking-details"></div>

                    <div class="calendar-section">
                        <h3>Add to Calendar</h3>
                        <div class="calendar-buttons">
                            <button class="btn-calendar google" data-action="addToGoogleCalendar">
                                <svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10z"/></svg>
                                Google Calendar
                            </button>
                            <button class="btn-calendar apple" data-action="downloadICS">
                                <svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10z"/></svg>
                                Apple/Outlook
                            </button>
                        </div>
                    </div>

                    <div class="contact-section">
                        <h3>Have Questions?</h3>
                        <p>Need to reschedule or have questions about your session? Contact me directly.</p>
                        <a href="#" data-action="openContactForm" class="btn-contact">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            Email Me
                        </a>
                    </div>

                    <button class="btn-secondary" data-action="reloadPage">Book Another Session</button>
                </div>
            </div>
        </div>

        <!-- Admin Access Link (only for authorized admins) -->
        {% if is_admin %}
        <div class="admin-access-footer">
            <a href="/admin" class="admin-link">Admin Access</a>
        </div>
        {% endif %}
    </div>

    <!-- Site Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>&copy; {{ current_year }} LearnAI. All rights reserved.</p>
        </div>
    </footer>

    <!-- Welcome Popup Modal -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-modal-content">
            <div class="welcome-modal-header">
                <div class="welcome-logo-container">
                    <img src="/static/icon.png" alt="LeAIrn Logo" class="welcome-logo" />
                </div>
                <div class="welcome-header-text">
                    <h1>Master AI. Shape Your Future.</h1>
                    <p class="welcome-subtitle">One-on-one sessions with professional AI tutors</p>
                </div>
                <div class="welcome-header-glow"></div>
            </div>

            <div class="welcome-modal-body">
                <div class="welcome-features">
                    <div class="welcome-feature" style="animation-delay: 0.1s">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 14l9-5-9-5-9 5 9 5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 14v7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="feature-text">
                            <h3>Expert Tutors</h3>
                            <p>Learn from professionals who use AI daily</p>
                        </div>
                    </div>
                    <div class="welcome-feature" style="animation-delay: 0.2s">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="feature-text">
                            <h3>Flexible Scheduling</h3>
                            <p>30-90 minute sessions tailored to your needs</p>
                        </div>
                    </div>
                    <div class="welcome-feature" style="animation-delay: 0.3s">
                        <div class="feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13 10V3L4 14h7v7l9-11h-7z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="feature-text">
                            <h3>Accelerated Learning</h3>
                            <p>Curriculum tailored to your goals</p>
                        </div>
                    </div>
                </div>

                <div class="welcome-cta">
                    <button type="button" class="btn-welcome-start" data-action="closeWelcomeModal">
                        <span>Get Started</span>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13 7l5 5m0 0l-5 5m5-5H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <p class="welcome-note">Free for Monmouth University students</p>
                </div>
            </div>
        </div>
    </div>

    <!-- View Booking Modal -->
    <div id="viewBookingModal" class="welcome-modal hidden">
        <div class="welcome-modal-content" style="max-width: 650px; overflow-y: auto; position: relative;">
            <button data-action="closeViewBookingModal" class="view-booking-close-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div class="welcome-modal-header">
                <h1>View My Booking</h1>
                <p class="welcome-subtitle" id="viewBookingSubtitle">Enter your email to view your upcoming booking</p>
            </div>

            <div class="welcome-modal-body" style="padding: 2rem;">
                <!-- Email input (hidden for authenticated users) -->
                <div id="emailInputSection" style="margin-bottom: 1.5rem;">
                    <label for="lookup_email" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-primary);">Email Address</label>
                    <input type="email" id="lookup_email" placeholder="john@example.com" style="width: 100%; padding: 1rem; border: 2px solid var(--border); border-radius: 0.75rem; font-size: 1rem; background: var(--bg); color: var(--text-primary);" required>
                </div>

                <!-- Authenticated user display (hidden initially) -->
                <div id="authenticatedUserSection" style="margin-bottom: 1.5rem; display: none;">
                    <p style="color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 0.5rem;">Loading your booking for:</p>
                    <div style="background: var(--bg); border: 2px solid var(--border); border-radius: 0.75rem; padding: 1rem; color: var(--primary); font-weight: 600;">
                        <span id="authenticatedUserEmail"></span>
                    </div>
                </div>

                <!-- Button section - hidden for authenticated users, shown for non-authenticated -->
                <div id="buttonSection" style="display: flex; gap: 1rem;">
                    <button data-action="closeViewBookingModal" class="btn-modal-secondary" style="flex: 1;">
                        Cancel
                    </button>
                    <button data-action="lookupBooking" class="btn-welcome-start" id="viewBookingButton" style="flex: 1;">
                        View Booking
                    </button>
                </div>

                <div id="booking-lookup-result" style="margin-top: 1.5rem; display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Contact Form Modal -->
    <div id="contactFormModal" class="welcome-modal hidden">
        <div class="welcome-modal-content" style="max-width: 550px; overflow-y: hidden;">
            <div class="welcome-modal-header">
                <h1>Contact Me</h1>
                <p class="welcome-subtitle">Send me a message about your AI learning session</p>
            </div>

            <div class="welcome-modal-body">
                <form id="contactForm" data-action="submitContactForm">
                    <div class="modal-form-group">
                        <label for="contact_name" class="modal-label">Your Name</label>
                        <input type="text" id="contact_name" class="modal-input" placeholder="John Doe" required>
                    </div>

                    <div class="modal-form-group">
                        <label for="contact_email" class="modal-label">Your Email</label>
                        <input type="email" id="contact_email" class="modal-input" placeholder="john@example.com" required>
                    </div>

                    <div class="modal-form-group">
                        <label for="contact_message" class="modal-label">Message</label>
                        <textarea id="contact_message" class="modal-input" placeholder="I have a question about..." rows="5" style="resize: vertical;" required></textarea>
                    </div>

                    <div style="display: flex; gap: 1rem;">
                        <button type="button" data-action="closeContactForm" class="btn-modal-secondary" style="flex: 1;">
                            Cancel
                        </button>
                        <button type="submit" class="btn-welcome-start" style="flex: 1;">
                            Send Message
                        </button>
                    </div>
                </form>

                <div id="contact-form-result" style="margin-top: 1.5rem; display: none;"></div>
            </div>
        </div>
    </div>

    
    <!-- Educational Popup for Coding Sessions -->
    <div id="codingEducationModal" class="modal hidden">
        <div class="modal-overlay" data-action="closeCodingEducationModal"></div>

        <!-- STOP Sign Initial Screen -->
        <div class="modal-content stop-sign-modal" id="stopSignScreen">
            <div class="stop-sign-content">
                <div class="stop-sign">STOP</div>
                <h2>Quick Preparation Notice</h2>
                <p>Before we proceed, let's make sure you're set up for success with coding projects.</p>
                <button class="btn-primary" data-action="showFullEducationModal">
                    Show Me What I Need
                </button>
                <button class="btn-secondary" data-action="closeCodingEducationModal" data-param="skip">
                    I Don't Have Time Right Now
                </button>
            </div>
        </div>

        <!-- Full Educational Content -->
        <div class="modal-content coding-education-modal hidden" id="fullEducationContent">
            <button class="close-modal-btn" data-action="closeCodingEducationModal" data-param="close">&times;</button>

            <div class="coding-education-header">
                <h2>Recommended Setup for Coding Projects</h2>
                <p class="education-subtitle">Maximize your session time by preparing in advance</p>
            </div>

            <div class="coding-education-body">
                <!-- What is Code Section -->
                <div class="education-section what-is-code">
                    <h3>What is Code?</h3>
                    <p><strong>Code</strong> is a set of instructions that tells a computer what to do. Think of it like a recipe, but for software. It gives you complete control to build exactly what you imagine.</p>
                </div>

                <!-- Time Savings Message -->
                <div class="education-section time-savings-note">
                    <h3>Why Set Up Before Your Meeting?</h3>
                    <p>Having these tools installed beforehand means we can <strong>focus entirely on building your project</strong> during your session, rather than spending valuable meeting time on software installation.</p>
                    <p class="tagline"><strong>More creation. Less configuration.</strong></p>
                </div>

                <!-- Tools Section -->
                <div class="education-section">
                    <h3>Required Development Tools</h3>
                    <p>All tools are free and commonly used in professional development:</p>
                    <div class="already-have-note">
                        <strong>Already have these?</strong> That's awesome! You can close this and continue booking your session.
                    </div>

                    <div class="tools-checklist">
                        <!-- GitHub -->
                        <div class="tool-card">
                            <div class="tool-header">
                                <h4>GitHub</h4>
                            </div>
                            <p>A platform to store, share, and collaborate on code projects.</p>
                            <details class="setup-guide">
                                <summary>Setup Instructions</summary>
                                <ol>
                                    <li>Go to <a href="https://github.com" target="_blank">github.com</a></li>
                                    <li>Click "Sign up" and create a free account</li>
                                    <li>Verify your email address</li>
                                </ol>
                            </details>
                        </div>

                        <!-- VSCode -->
                        <div class="tool-card">
                            <div class="tool-header">
                                <h4>VS Code</h4>
                            </div>
                            <p>A free code editor where you write your code. Think of it as Word for programming.</p>
                            <details class="setup-guide">
                                <summary>Setup Instructions</summary>
                                <ol>
                                    <li>Go to <a href="https://code.visualstudio.com" target="_blank">code.visualstudio.com</a></li>
                                    <li>Click "Download" and run the installer</li>
                                    <li>Follow the installation prompts</li>
                                </ol>
                            </details>
                        </div>

                        <!-- GitHub Copilot -->
                        <div class="tool-card">
                            <div class="tool-header">
                                <h4>GitHub Copilot</h4>
                            </div>
                            <p>An AI assistant that helps you write code (Free for students).</p>
                            <details class="setup-guide">
                                <summary>Setup Instructions</summary>
                                <ol>
                                    <li>Apply at <a href="https://education.github.com/pack" target="_blank">GitHub Student Developer Pack</a></li>
                                    <li>Verify your student status with your school email</li>
                                    <li>In VS Code, open Extensions and search "GitHub Copilot"</li>
                                    <li>Install and sign in with your GitHub account</li>
                                </ol>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- Important Notes -->
                <div class="education-section important-notes">
                    <div class="note-card recommended">
                        <h4>This Setup is Recommended, Not Required</h4>
                        <p>If you don't have time to set these up beforehand, we can help you during your session. However, having them ready means more time for actual project development.</p>
                    </div>

                    <div class="note-card alternative">
                        <h4>Alternative Tools</h4>
                        <p>Other tools exist for building projects:</p>
                        <ul style="margin-bottom: 12px;">
                            <li><strong>AI Code Generators:</strong> v0, Lovable, Bolt, Cursor</li>
                            <li><strong>No-Code Platforms:</strong> Webflow, Bubble, Wix, Framer</li>
                        </ul>
                        <p>We focus on GitHub, VS Code, and Copilot because they provide full customization, complete control, and transferable professional skills.</p>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="education-actions">
                    <button class="btn-primary" data-action="acknowledgeAndContinue" data-param="ready">
                        Continue to Time Selection
                    </button>
                    <button class="btn-secondary" data-action="closeCodingEducationModal" data-param="no_time">
                        I Don't Have Time for This Right Now
                    </button>
                </div>
            </div>
        </div>
    </div>
    </div> <!-- Close mainContent -->

    <!-- Admin Registration Modal (SSO) -->
    <div id="adminRegistrationModal" class="modal" style="display: none;">
        <div class="modal-overlay" data-action="closeAdminRegistrationModal"></div>
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Create Your Admin Account</h2>
                <button class="modal-close" data-action="closeAdminRegistrationModal">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1.5rem; color: var(--text-secondary);">
                    Welcome! Your email has been recognized as an admin account. Please create a username and password to secure your admin access.
                </p>
                <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-weight: 600;">
                    Email: <span id="adminEmailDisplay" style="color: var(--primary);"></span>
                </p>

                <form id="adminRegistrationForm" data-action="submitAdminRegistration">
                    <div class="form-group">
                        <label for="admin_username">Username *</label>
                        <input type="text" id="admin_username" required minlength="3" placeholder="Choose a username">
                        <small class="form-hint">Minimum 3 characters</small>
                    </div>

                    <div class="form-group">
                        <label for="admin_password">Password *</label>
                        <input type="password" id="admin_password" required minlength="8" placeholder="Create a strong password">
                        <small class="form-hint">Minimum 8 characters</small>
                    </div>

                    <div class="form-group">
                        <label for="admin_confirm_password">Confirm Password *</label>
                        <input type="password" id="admin_confirm_password" required minlength="8" placeholder="Re-enter your password">
                    </div>

                    <div id="adminRegError" style="display: none; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); color: #ef4444; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;"></div>

                    <div class="button-group" style="margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" data-action="closeAdminRegistrationModal">Cancel</button>
                        <button type="submit" class="btn-primary" id="adminRegSubmitBtn">
                            <span class="btn-text">Create Account</span>
                            <span class="btn-spinner hidden"></span>
                        </button>
                    </div>
                </form>

                <p style="margin-top: 1.5rem; font-size: 0.875rem; color: var(--text-tertiary); text-align: center;">
                    Your password will be encrypted with industry-standard security (pbkdf2:sha256)
                </p>
            </div>
        </div>
    </div>

    <script src="/static/js/script.js"></script>
    <script src="/static/js/index.js"></script>
</body>
</html>
